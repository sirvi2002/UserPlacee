"use strict";(self.webpackChunkuser_place=self.webpackChunkuser_place||[]).push([[915],{6925:function(e,t,a){a.r(t);var n=a(4165),r=a(5861),i=a(885),s=a(2791),c=a(8931),l=a(2810),o=a(3999),u=a(3373),p=a(291),d=a(5094),f=(a(8055),a(9508)),v=a(9895),h=a(5434),x=a(3108),m=a(184);t.default=function(){var e=(0,f.x)(),t=e.isLoading,a=e.error,Z=e.sendRequest,b=e.clearError,j=(0,s.useState)(),k=(0,i.Z)(j,2),V=k[0],y=k[1],C=(0,c.UO)().placeId,P=(0,c.k6)(),g=(0,s.useContext)(x.V),w=(0,d.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),N=(0,i.Z)(w,3),T=N[0],I=N[1],A=N[2];(0,s.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Got here"),console.log("Place Id : "+C),e.next=5,Z("https://userplace-6a4abfe593b5.herokuapp.com/api"+"/places/".concat(C));case 5:t=e.sent,y(t.place),A({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[Z,C,A]);var E=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Z("https://userplace-6a4abfe593b5.herokuapp.com/api"+"/places/".concat(C),"PATCH",JSON.stringify({title:T.inputs.title.value,description:T.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:P.push("/"+g.userId+"/places"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return t?(0,m.jsx)("div",{className:"center",children:(0,m.jsx)(v.Z,{asOverlay:!0})}):V||a?(0,m.jsxs)(s.Fragment,{children:[(0,m.jsx)(h.Z,{error:a,onClear:b}),!t&&V&&(0,m.jsxs)("form",{className:"place-form",onSubmit:E,children:[(0,m.jsx)(l.Z,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,p.hg)()],errorText:"Please enter a valid title.",onInput:I,initialValue:V.title,initialValid:!0}),(0,m.jsx)(l.Z,{id:"description",element:"textarea",label:"Description",validators:[(0,p.CP)(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:I,initialValue:V.description,initialValid:!0}),(0,m.jsx)(o.Z,{type:"submit",disabled:!T.isValid,children:"UPDATE PLACE"})]})]}):(0,m.jsx)("div",{className:"center",children:(0,m.jsx)(u.Z,{children:(0,m.jsx)("h2",{children:"Could not find place!"})})})}},3373:function(e,t,a){a.d(t,{Z:function(){return r}});a(2791);var n=a(184),r=function(e){return(0,n.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}},8055:function(){}}]);
//# sourceMappingURL=915.a59636cb.chunk.js.map