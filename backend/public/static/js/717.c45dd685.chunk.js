"use strict";(self.webpackChunkuser_place=self.webpackChunkuser_place||[]).push([[717],{1099:function(e,a,t){t.r(a);var r=t(4165),n=t(5861),i=t(885),s=t(2791),l=t(8931),u=t(2810),c=t(3999),d=t(291),o=t(5434),p=t(9895),v=t(9508),f=t(3108),x=t(7212),m=t(5094),h=(t(8055),t(184));a.default=function(){var e=(0,s.useContext)(f.V),a=(0,v.x)(),t=a.isLoading,g=a.error,j=a.clearError,Z=a.sendRequest,b=(0,m.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),k=(0,i.Z)(b,2),P=k[0],C=k[1],w=(0,l.k6)(),y=function(){var a=(0,n.Z)((0,r.Z)().mark((function a(t){var n;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,(n=new FormData).append("title",P.inputs.title.value),n.append("description",P.inputs.description.value),n.append("address",P.inputs.address.value),n.append("coordinates",{lat:0,lon:0}),n.append("creator",e.userId),n.append("image",P.inputs.image.value),a.next=11,Z("https://userplace-6a4abfe593b5.herokuapp.com/api/places/","POST",n,{Authorization:"Bearer "+e.token});case 11:w.push("/"),a.next=16;break;case 14:a.prev=14,a.t0=a.catch(1);case 16:case"end":return a.stop()}}),a,null,[[1,14]])})));return function(e){return a.apply(this,arguments)}}();return(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(o.Z,{error:g,onClear:j}),(0,h.jsxs)("form",{className:"place-form",onSubmit:y,children:[t&&(0,h.jsx)(p.Z,{asOverlay:!0}),(0,h.jsx)(u.Z,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,d.hg)()],errorText:"Please enter a valid title.",onInput:C}),(0,h.jsx)(u.Z,{id:"description",element:"textarea",label:"Description",validators:[(0,d.CP)(5)],errorText:"Please enter a valid description (at least 5 characters).",onInput:C}),(0,h.jsx)(u.Z,{id:"address",element:"input",label:"Address",validators:[(0,d.hg)()],errorText:"Please enter a valid address.",onInput:C}),(0,h.jsx)(x.Z,{id:"image",onInput:C,errorText:"Please provide an image."}),(0,h.jsx)(c.Z,{type:"submit",disabled:!P.isValid,children:"ADD PLACE"})]})]})}},7212:function(e,a,t){t.d(a,{Z:function(){return l}});var r=t(885),n=t(2791),i=t(3999),s=t(184),l=function(e){var a=(0,n.useState)(),t=(0,r.Z)(a,2),l=t[0],u=t[1],c=(0,n.useState)(),d=(0,r.Z)(c,2),o=d[0],p=d[1],v=(0,n.useState)(!1),f=(0,r.Z)(v,2),x=f[0],m=f[1],h=(0,n.useRef)();(0,n.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){p(e.result)},e.readAsDataURL(l)}}),[l]);return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("input",{ref:h,id:e.id,style:{display:"none"},onChange:function(a){var t,r;a.target.files&&1===a.target.files.length?(t=a.target.files[0],u(t),m(!0),r=!0):(m(!1),r=!1),e.onInput(e.id,t,r)},type:"file",accept:".jpg,.png,.jpeg"}),(0,s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,s.jsxs)("div",{className:"image-upload__preview",children:[o&&(0,s.jsx)("img",{src:o,alt:"Preview"}),!o&&(0,s.jsx)("p",{children:"Please pick an image."})]}),(0,s.jsx)(i.Z,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!x&&(0,s.jsx)("p",{children:e.errorText})]})}},8055:function(){}}]);
//# sourceMappingURL=717.c45dd685.chunk.js.map