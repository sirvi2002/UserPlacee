"use strict";(self.webpackChunkuser_place=self.webpackChunkuser_place||[]).push([[418],{7212:function(e,n,a){a.d(n,{Z:function(){return l}});var t=a(885),r=a(2791),s=a(3999),i=a(184),l=function(e){var n=(0,r.useState)(),a=(0,t.Z)(n,2),l=a[0],u=a[1],c=(0,r.useState)(),o=(0,t.Z)(c,2),p=o[0],d=o[1],m=(0,r.useState)(!1),f=(0,t.Z)(m,2),v=f[0],x=f[1],h=(0,r.useRef)();(0,r.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){d(e.result)},e.readAsDataURL(l)}}),[l]);return(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("input",{ref:h,id:e.id,style:{display:"none"},onChange:function(n){var a,t;n.target.files&&1===n.target.files.length?(a=n.target.files[0],u(a),x(!0),t=!0):(x(!1),t=!1),e.onInput(e.id,a,t)},type:"file",accept:".jpg,.png,.jpeg"}),(0,i.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,i.jsxs)("div",{className:"image-upload__preview",children:[p&&(0,i.jsx)("img",{src:p,alt:"Preview"}),!p&&(0,i.jsx)("p",{children:"Please pick an image."})]}),(0,i.jsx)(s.Z,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!v&&(0,i.jsx)("p",{children:e.errorText})]})}},3373:function(e,n,a){a.d(n,{Z:function(){return r}});a(2791);var t=a(184),r=function(e){return(0,t.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}},4191:function(e,n,a){a.r(n),a.d(n,{default:function(){return j}});var t=a(1413),r=a(4165),s=a(5861),i=a(885),l=a(2791),u=a(2810),c=a(291),o=a(5094),p=a(3999),d=a(5434),m=a(9895),f=a(3373),v=a(3108),x=a(7212),h=a(9508),g=a(184),j=function(){var e=(0,l.useContext)(v.V),n=(0,l.useState)(!0),a=(0,i.Z)(n,2),j=a[0],Z=a[1],b=(0,h.x)(),w=b.isLoading,k=b.sendRequest,I=b.error,y=b.clearError,P=(0,o.c)({email:{value:"",isValid:!1}},!1),N=(0,i.Z)(P,3),C=N[0],S=N[1],T=N[2],O=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(a){var t,s,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!j){n.next=13;break}return n.prev=2,n.next=5,k("https://userplace-6a4abfe593b5.herokuapp.com/api/users/login","POST",JSON.stringify({email:C.inputs.email.value,password:C.inputs.password.value}),{"Content-Type":"application/json"});case 5:t=n.sent,e.login(t.userId,t.token),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:n.next=27;break;case 13:return n.prev=13,(s=new FormData).append("email",C.inputs.email.value),s.append("name",C.inputs.name.value),s.append("password",C.inputs.password.value),s.append("image",C.inputs.image.value),n.next=21,k("https://userplace-6a4abfe593b5.herokuapp.com/api/users/signup","POST",s);case 21:i=n.sent,e.login(i.userId,i.token),n.next=27;break;case 25:n.prev=25,n.t1=n.catch(13);case 27:case"end":return n.stop()}}),n,null,[[2,9],[13,25]])})));return function(e){return n.apply(this,arguments)}}();return(0,g.jsxs)(l.Fragment,{children:[(0,g.jsx)(d.Z,{error:I,onClear:y}),(0,g.jsxs)(f.Z,{className:"authentication",children:[w&&(0,g.jsx)(m.Z,{asOverlay:!0}),(0,g.jsx)("h2",{children:"Login Required"}),(0,g.jsx)("hr",{}),(0,g.jsxs)("form",{onSubmit:O,children:[!j&&(0,g.jsx)(u.Z,{id:"name",element:"input",type:"text",label:"Your Name",validators:[(0,c.hg)()],errorText:"Please enter a name.",onInput:S}),!j&&(0,g.jsx)(x.Z,{center:!0,id:"image",onInput:S,errorText:"Please provide an image."}),(0,g.jsx)(u.Z,{id:"email",element:"input",type:"email",label:"E-mail",validators:[(0,c.Ox)()],errorText:"Please enter a valid Email.",onInput:S}),(0,g.jsx)(u.Z,{id:"password",element:"input",type:"password",label:"Password",validators:[(0,c.CP)(6),(0,c.IT)(8)],errorText:"Password length must be in between 6 to 8.",onInput:S}),(0,g.jsx)(p.Z,{type:"submit",disabled:!C.isValid,children:j?"LOGIN":"SIGNUP"})]}),(0,g.jsxs)(p.Z,{inverse:!0,onClick:function(){j?T((0,t.Z)((0,t.Z)({},C.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):T((0,t.Z)((0,t.Z)({},C.inputs),{},{name:void 0,image:void 0}),C.inputs.email.isValid&&C.inputs.password.isValid),Z((function(e){return!e}))},children:["SWITCH TO ",j?"SIGNUP":"LOGIN"]})]})]})}}}]);
//# sourceMappingURL=418.878fe343.chunk.js.map